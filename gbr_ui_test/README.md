# FUREcast GBR UI Test Demo

## Overview

This is a **skeleton demonstration** of the FUREcast application using a GradientBoostingRegressor-based architecture. It showcases the planned user interface and system architecture without requiring a fully trained model or live market data APIs.

## Architecture

The demo simulates the core pipeline described in the GBR development plan:

```
[ User Query ]
      ↓
[ LLM Router ] → classifies intent (simulated)
      ↓
[ Tool Planner ] → builds JSON plan (simulated)
      ↓
[ Tool Executor ] → runs simulated tools (data, predictions, charts)
      ↓
[ Answer Composer ] → LLM generates explanation
      ↓
[ UI Renderer ] → Streamlit displays results
```

## Features Demonstrated

### 1. **Model Prediction Card**
- Simulated GBR prediction (next-day SPLG return)
- Direction indicator (Up/Down/Neutral)
- Confidence score
- Top influential features with importance scores

### 2. **Natural Language Query Interface**
- Text input for user questions
- LLM-powered intent classification
- Simulated tool execution
- Dynamic response generation

### 3. **Interactive Visualizations**
- SPLG price chart with moving averages
- Sector risk treemap
- Feature importance bar chart
- Comparative sector performance

### 4. **Mode Toggle**
- **Lite Mode**: Basic prediction + limited visuals
- **Pro Mode**: Full LLM interface + all visualization tools

## What's Simulated

Since this is a demo skeleton, the following components use **simulated data**:

- **GBR Model**: Predictions generated by OpenAI API based on realistic patterns
- **Market Data**: Historical prices simulated with realistic volatility
- **Risk Calculations**: Metrics generated with plausible ranges
- **Tool Execution**: Functions return mock data structures

## Setup Instructions

### Prerequisites
- Python 3.8+
- OpenAI API key

### Installation

```bash
# From the workspace root
cd gbr_ui_test

# Install dependencies
pip install -r requirements.txt

# Set up environment variables
# Option 1: Copy the example file and edit it
cp .env.example ../.env
# Then edit ../.env and add your actual OpenAI API key

# Option 2: Create ../.env manually with:
# OPENAI_API_KEY=your_actual_api_key_here
```

**Important:** The application looks for the `.env` file in the **workspace root** (parent directory of `gbr_ui_test`), not in the `gbr_ui_test` directory itself. This is so you can use the same API key across multiple projects.

### Running the Demo

```bash
streamlit run app.py
```

The application will open in your browser at `http://localhost:8501`

## File Structure

```
gbr_ui_test/
├── app.py                  # Main Streamlit application
├── simulator.py            # Simulated data/model/tool functions
├── llm_interface.py        # LLM router, planner, composer
├── requirements.txt        # Python dependencies
└── README.md              # This file
```

## Key Components

### `app.py`
The main Streamlit interface with:
- Sidebar for mode selection and disclaimers
- Model prediction card
- Natural language query panel
- Visualization display area

### `simulator.py`
Simulated backend functions that mimic:
- `fetch_prices()`: Generate realistic OHLCV data
- `compute_risk()`: Calculate volatility, Sharpe, drawdown
- `predict_splg()`: GBR prediction simulation via LLM
- `viz_from_spec()`: Create Plotly charts from specifications

### `llm_interface.py`
LLM orchestration layer:
- `route_query()`: Classify user intent
- `plan_tools()`: Generate JSON tool execution plan
- `compose_answer()`: Synthesize results into readable response

## Example Queries to Try

1. **"Is now a good time to invest in SPLG?"**
   - Triggers prediction + market outlook

2. **"Which sectors look stable this quarter?"**
   - Generates sector risk ranking + treemap

3. **"Compare Technology vs Utilities performance"**
   - Creates comparative line chart

4. **"What influenced today's prediction?"**
   - Shows feature importance explanation

## Educational Disclaimer

This application is for **educational purposes only** and does not constitute financial advice. All predictions and analyses are simulated demonstrations of data science concepts.

## Next Steps for Full Implementation

To evolve this demo into the full FUREcast application:

1. **Train actual GBR model** on engineered SPLG features
2. **Integrate real market APIs** (yfinance, Alpha Vantage)
3. **Build SQLite database** for caching and historical data
4. **Implement robust error handling** and input validation
5. **Add remaining visualizations** (dividend calendar, timeline, simulator)
6. **Deploy to Streamlit Community Cloud**

## Questions or Feedback?

This demo is meant to spark discussion and refinement. Share your thoughts with the team!
